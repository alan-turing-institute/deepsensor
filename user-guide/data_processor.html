
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DataProcessor &#8212; DeepSensor</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=7f8ff830"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user-guide/data_processor';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tasks" href="task.html" />
    <link rel="prev" title="DeepSensor design" href="deepsensor_design.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/DeepSensorLogo2.png" class="logo__image only-light" alt="DeepSensor - Home"/>
    <script>document.write(`<img src="../_static/DeepSensorLogo2.png" class="logo__image only-dark" alt="DeepSensor - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to DeepSensor’s documentation!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">Getting started</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/overview.html">Overview: Why DeepSensor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/data_requirements.html">Data Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html">Installation instructions</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">User Guide</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="deepsensor_design.html">DeepSensor design</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">DataProcessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="task.html">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_loader.html">TaskLoader</a></li>
<li class="toctree-l2"><a class="reference internal" href="convnp.html">ConvNP</a></li>
<li class="toctree-l2"><a class="reference internal" href="training.html">Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="prediction.html">Prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="active_learning.html">Active learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="acquisition_functions.html">Acquisition functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending.html">Adding models to DeepSensor</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../community/index.html">Community</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/contributing.html">Contributing to DeepSensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/roadmap.html">DeepSensor Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/faq.html">Community FAQ</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research_ideas.html">DeepSensor research ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact the core team</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/data/index.html">deepsensor.data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/data/sources.html">deepsensor.data.sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/data/loader.html">deepsensor.data.loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/data/processor.html">deepsensor.data.processor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/data/task.html">deepsensor.data.task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/data/utils.html">deepsensor.data.utils</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/model/index.html">deepsensor.model</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/model/model.html">deepsensor.model.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/model/pred.html">deepsensor.model.pred</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/model/convnp.html">deepsensor.model.convnp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/model/defaults.html">deepsensor.model.defaults</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/model/nps.html">deepsensor.model.nps</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/train/index.html">deepsensor.train</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/train/train.html">deepsensor.train.train</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/active_learning/index.html">deepsensor.active_learning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/active_learning/acquisition_fns.html">deepsensor.active_learning.acquisition_fns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/active_learning/algorithms.html">deepsensor.active_learning.algorithms</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/plot.html">deepsensor.plot</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/alan-turing-institute/deepsensor" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/alan-turing-institute/deepsensor/issues/new?title=Issue%20on%20page%20%2Fuser-guide/data_processor.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/user-guide/data_processor.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>DataProcessor</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initialising-a-dataprocessor">Initialising a DataProcessor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normalising-data-with-a-dataprocessor">Normalising data with a DataProcessor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataprocessor-configuration">DataProcessor configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unnormalising-data">Unnormalising data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-and-loading-a-dataprocessor">Saving and loading a DataProcessor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-normalisation-parameters-over-a-subset-of-the-data">Computing normalisation parameters over a subset of the data</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="dataprocessor">
<h1>DataProcessor<a class="headerlink" href="#dataprocessor" title="Link to this heading">#</a></h1>
<p>The first step in any modelling pipeline is to normalise and standardise the data.
In DeepSensor, this is achieved with the <a class="reference internal" href="../reference/data/processor.html"><span class="std std-doc"><code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> class</span></a>.
Let’s load some environmental data from <code class="docutils literal notranslate"><span class="pre">deepsensor.data.sources</span></code> and see how it works!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the data downloader functions used here require additional dependencies.
To run this yourself you will need to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">rioxarray</span>
</pre></div>
</div>
<p>to install the <a class="reference external" href="https://corteva.github.io/rioxarray/stable/"><code class="docutils literal notranslate"><span class="pre">rioxarray</span></code></a> package and</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">scott</span><span class="o">-</span><span class="n">hosking</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">station</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>to install the <a class="reference external" href="https://github.com/scotthosking/get-station-data"><code class="docutils literal notranslate"><span class="pre">get_station_data</span></code></a> package.</p>
</div>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">captureWarnings</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Using the same settings allows use to use pre-downloaded cached data</span>
<span class="n">data_range</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;2015-06-25&quot;</span><span class="p">,</span> <span class="s2">&quot;2015-06-30&quot;</span><span class="p">)</span>
<span class="n">extent</span> <span class="o">=</span> <span class="s2">&quot;europe&quot;</span>
<span class="n">station_var_IDs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;TAVG&quot;</span><span class="p">,</span> <span class="s2">&quot;PRCP&quot;</span><span class="p">]</span>
<span class="n">era5_var_IDs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;2m_temperature&quot;</span><span class="p">,</span> <span class="s2">&quot;10m_u_component_of_wind&quot;</span><span class="p">,</span> <span class="s2">&quot;10m_v_component_of_wind&quot;</span><span class="p">]</span>
<span class="n">aux_var_IDs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;elevation&quot;</span><span class="p">,</span> <span class="s2">&quot;tpi&quot;</span><span class="p">]</span>
<span class="n">cache_dir</span> <span class="o">=</span> <span class="s2">&quot;../../.datacache&quot;</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">deepsensor.data</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataProcessor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepsensor.data.sources</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_ghcnd_station_data</span><span class="p">,</span> <span class="n">get_era5_reanalysis_data</span><span class="p">,</span> <span class="n">get_earthenv_auxiliary_data</span><span class="p">,</span> <span class="n">get_gldas_land_mask</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">station_raw_df</span> <span class="o">=</span> <span class="n">get_ghcnd_station_data</span><span class="p">(</span><span class="n">station_var_IDs</span><span class="p">,</span> <span class="n">extent</span><span class="p">,</span> <span class="n">date_range</span><span class="o">=</span><span class="n">data_range</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">)</span>
<span class="n">era5_raw_ds</span> <span class="o">=</span> <span class="n">get_era5_reanalysis_data</span><span class="p">(</span><span class="n">era5_var_IDs</span><span class="p">,</span> <span class="n">extent</span><span class="p">,</span> <span class="n">date_range</span><span class="o">=</span><span class="n">data_range</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">)</span>
<span class="n">aux_raw_ds</span> <span class="o">=</span> <span class="n">get_earthenv_auxiliary_data</span><span class="p">(</span><span class="n">aux_var_IDs</span><span class="p">,</span> <span class="n">extent</span><span class="p">,</span> <span class="s2">&quot;1KM&quot;</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">)</span>
<span class="n">land_mask_raw_ds</span> <span class="o">=</span> <span class="n">get_gldas_land_mask</span><span class="p">(</span><span class="n">extent</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████████| 3142/3142 [02:42&lt;00:00, 19.33it/s]
</pre></div>
</div>
</div>
</div>
<section id="initialising-a-dataprocessor">
<h2>Initialising a DataProcessor<a class="headerlink" href="#initialising-a-dataprocessor" title="Link to this heading">#</a></h2>
<p>To initialise a <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> object, provide it with the names of the spatiotemporal dimensions in your data (defaults to <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">x1</span></code>, <code class="docutils literal notranslate"><span class="pre">x2</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_processor</span> <span class="o">=</span> <span class="n">DataProcessor</span><span class="p">(</span><span class="n">x1_name</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="n">x2_name</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_processor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DataProcessor with normalisation params:
{&#39;coords&#39;: {&#39;time&#39;: {&#39;name&#39;: &#39;time&#39;},
            &#39;x1&#39;: {&#39;map&#39;: None, &#39;name&#39;: &#39;lat&#39;},
            &#39;x2&#39;: {&#39;map&#39;: None, &#39;name&#39;: &#39;lon&#39;}}}
</pre></div>
</div>
</div>
</div>
</section>
<section id="normalising-data-with-a-dataprocessor">
<h2>Normalising data with a DataProcessor<a class="headerlink" href="#normalising-data-with-a-dataprocessor" title="Link to this heading">#</a></h2>
<p>Calling a <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> on an xarray or pandas object will compute normalisation parameters for each variable in the object (if not already computed) and return the normalised object/s.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">era5_ds</span> <span class="o">=</span> <span class="n">data_processor</span><span class="p">(</span><span class="n">era5_raw_ds</span><span class="p">)</span>
<span class="n">era5_ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                  (time: 6, x1: 141, x2: 221)
Coordinates:
  * time                     (time) datetime64[ns] 2015-06-25 ... 2015-06-30
  * x1                       (x1) float32 0.6364 0.6318 0.6273 ... 0.004545 0.0
  * x2                       (x2) float32 0.0 0.004545 0.009091 ... 0.9955 1.0
Data variables:
    2m_temperature           (time, x1, x2) float32 -2.652 -2.635 ... 2.322
    10m_u_component_of_wind  (time, x1, x2) float32 1.987 1.985 ... 1.572 1.529
    10m_v_component_of_wind  (time, x1, x2) float32 1.054 1.018 ... -0.724</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c1eec562-6b09-46ba-b71c-3a65173f9cfe' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c1eec562-6b09-46ba-b71c-3a65173f9cfe' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 6</li><li><span class='xr-has-index'>x1</span>: 141</li><li><span class='xr-has-index'>x2</span>: 221</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-2b3cd0b3-a584-4147-a58f-8268bc4adf92' class='xr-section-summary-in' type='checkbox'  checked><label for='section-2b3cd0b3-a584-4147-a58f-8268bc4adf92' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-06-25 ... 2015-06-30</div><input id='attrs-d6eb3a40-f978-4e94-b801-36fa8377aab5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d6eb3a40-f978-4e94-b801-36fa8377aab5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-87e687b3-41fa-4d49-93c9-992fd7b22da1' class='xr-var-data-in' type='checkbox'><label for='data-87e687b3-41fa-4d49-93c9-992fd7b22da1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-06-25T00:00:00.000000000&#x27;, &#x27;2015-06-26T00:00:00.000000000&#x27;,
       &#x27;2015-06-27T00:00:00.000000000&#x27;, &#x27;2015-06-28T00:00:00.000000000&#x27;,
       &#x27;2015-06-29T00:00:00.000000000&#x27;, &#x27;2015-06-30T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x1</span></div><div class='xr-var-dims'>(x1)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.6364 0.6318 ... 0.004545 0.0</div><input id='attrs-434da280-8731-4aad-bf68-324cb148fbda' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-434da280-8731-4aad-bf68-324cb148fbda' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e674ca65-5e43-4858-b1b6-dfccd520559a' class='xr-var-data-in' type='checkbox'><label for='data-e674ca65-5e43-4858-b1b6-dfccd520559a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.636364, 0.631818, 0.627273, 0.622727, 0.618182, 0.613636, 0.609091,
       0.604545, 0.6     , 0.595455, 0.590909, 0.586364, 0.581818, 0.577273,
       0.572727, 0.568182, 0.563636, 0.559091, 0.554545, 0.55    , 0.545455,
       0.540909, 0.536364, 0.531818, 0.527273, 0.522727, 0.518182, 0.513636,
       0.509091, 0.504545, 0.5     , 0.495455, 0.490909, 0.486364, 0.481818,
       0.477273, 0.472727, 0.468182, 0.463636, 0.459091, 0.454545, 0.45    ,
       0.445455, 0.440909, 0.436364, 0.431818, 0.427273, 0.422727, 0.418182,
       0.413636, 0.409091, 0.404545, 0.4     , 0.395455, 0.390909, 0.386364,
       0.381818, 0.377273, 0.372727, 0.368182, 0.363636, 0.359091, 0.354545,
       0.35    , 0.345455, 0.340909, 0.336364, 0.331818, 0.327273, 0.322727,
       0.318182, 0.313636, 0.309091, 0.304545, 0.3     , 0.295455, 0.290909,
       0.286364, 0.281818, 0.277273, 0.272727, 0.268182, 0.263636, 0.259091,
       0.254545, 0.25    , 0.245455, 0.240909, 0.236364, 0.231818, 0.227273,
       0.222727, 0.218182, 0.213636, 0.209091, 0.204545, 0.2     , 0.195455,
       0.190909, 0.186364, 0.181818, 0.177273, 0.172727, 0.168182, 0.163636,
       0.159091, 0.154545, 0.15    , 0.145455, 0.140909, 0.136364, 0.131818,
       0.127273, 0.122727, 0.118182, 0.113636, 0.109091, 0.104545, 0.1     ,
       0.095455, 0.090909, 0.086364, 0.081818, 0.077273, 0.072727, 0.068182,
       0.063636, 0.059091, 0.054545, 0.05    , 0.045455, 0.040909, 0.036364,
       0.031818, 0.027273, 0.022727, 0.018182, 0.013636, 0.009091, 0.004545,
       0.      ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x2</span></div><div class='xr-var-dims'>(x2)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 0.004545 ... 0.9955 1.0</div><input id='attrs-9aabbd95-3907-4fa3-bedd-86f8d0f82669' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9aabbd95-3907-4fa3-bedd-86f8d0f82669' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-51d71579-5f65-4d83-8f19-5385600a9767' class='xr-var-data-in' type='checkbox'><label for='data-51d71579-5f65-4d83-8f19-5385600a9767' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.      , 0.004545, 0.009091, ..., 0.990909, 0.995455, 1.      ],
      dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-932dfb1b-f516-4141-bfaa-1cd37ea8c857' class='xr-section-summary-in' type='checkbox'  checked><label for='section-932dfb1b-f516-4141-bfaa-1cd37ea8c857' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>2m_temperature</span></div><div class='xr-var-dims'>(time, x1, x2)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-2.652 -2.635 ... 2.235 2.322</div><input id='attrs-0d42e395-1de0-4556-9e36-02d74db64e5d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0d42e395-1de0-4556-9e36-02d74db64e5d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3f239a1e-baee-465b-aadd-25f18e9affa2' class='xr-var-data-in' type='checkbox'><label for='data-3f239a1e-baee-465b-aadd-25f18e9affa2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[-2.6523552 , -2.6348572 , -2.6191788 , ..., -1.190525  ,
         -1.1986656 , -1.2125969 ],
        [-2.615448  , -2.6060944 , -2.5952187 , ..., -1.1386185 ,
         -1.1468468 , -1.160923  ],
        [-2.5641403 , -2.5547295 , -2.545517  , ..., -1.0934029 ,
         -1.1080284 , -1.1220665 ],
        ...,
        [ 0.7250366 ,  0.71790314,  0.7080231 , ...,  1.9699783 ,
          2.1188316 ,  2.3057442 ],
        [ 0.7476959 ,  0.7334976 ,  0.7221947 , ...,  1.8910828 ,
          2.107647  ,  2.3647995 ],
        [ 0.7528763 ,  0.7448845 ,  0.73334885, ...,  2.2095985 ,
          2.31279   ,  2.398697  ]],

       [[-2.5501785 , -2.5397987 , -2.5316696 , ..., -1.46101   ,
         -1.459446  , -1.4568634 ],
        [-2.4556313 , -2.4541702 , -2.4519768 , ..., -1.4176788 ,
         -1.4160271 , -1.4134521 ],
        [-2.3554993 , -2.3542175 , -2.3529587 , ..., -1.376133  ,
         -1.3760033 , -1.3716049 ],
...
        [ 0.71673584,  0.69192123,  0.66566086, ...,  1.9801445 ,
          2.1486855 ,  2.3426056 ],
        [ 0.7229271 ,  0.69088745,  0.66340256, ...,  1.9233055 ,
          2.1533813 ,  2.4106102 ],
        [ 0.7176094 ,  0.6897087 ,  0.6639595 , ...,  2.2028618 ,
          2.3241425 ,  2.4215965 ]],

       [[-2.3398476 , -2.3420486 , -2.34449   , ..., -1.8318138 ,
         -1.8369827 , -1.8382492 ],
        [-2.3311996 , -2.3352852 , -2.3385582 , ..., -1.7985497 ,
         -1.8037567 , -1.8049812 ],
        [-2.3111572 , -2.315361  , -2.3195343 , ..., -1.76437   ,
         -1.769947  , -1.7740784 ],
        ...,
        [ 0.8371887 ,  0.82435226,  0.8161011 , ...,  1.8790741 ,
          2.038414  ,  2.2233696 ],
        [ 0.85030365,  0.8317833 ,  0.8202286 , ...,  1.8408623 ,
          2.0677109 ,  2.3173485 ],
        [ 0.85694885,  0.83976364,  0.8279114 , ...,  2.1220284 ,
          2.2351494 ,  2.3223839 ]]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>10m_u_component_of_wind</span></div><div class='xr-var-dims'>(time, x1, x2)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>1.987 1.985 1.985 ... 1.572 1.529</div><input id='attrs-06c52a7d-2604-415a-8b42-248fdb594516' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-06c52a7d-2604-415a-8b42-248fdb594516' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0e261621-c44b-4c08-9c71-2c66b28ca330' class='xr-var-data-in' type='checkbox'><label for='data-0e261621-c44b-4c08-9c71-2c66b28ca330' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[ 1.9867022 ,  1.9852841 ,  1.9854782 , ..., -0.03774244,
         -0.01398502,  0.01424471],
        [ 2.0099676 ,  2.0157323 ,  2.0208912 , ...,  0.02567162,
          0.04982929,  0.07827641],
        [ 1.9669826 ,  1.9727471 ,  1.9787295 , ...,  0.02890863,
          0.06622045,  0.10174783],
        ...,
        [ 0.107547  ,  0.09797318,  0.05313496, ...,  3.6755922 ,
          3.618241  ,  3.3195407 ],
        [ 0.11976318,  0.08455609,  0.02544282, ...,  3.5628335 ,
          3.531126  ,  3.1831043 ],
        [ 0.13624574,  0.06425302, -0.01961268, ...,  3.0371287 ,
          3.0529816 ,  2.9593139 ]],

       [[ 1.9374385 ,  1.9820731 ,  2.0263605 , ...,  1.8701108 ,
          1.9066098 ,  1.9328997 ],
        [ 1.8437095 ,  1.8855307 ,  1.9292805 , ...,  1.9600194 ,
          1.997056  ,  2.0236034 ],
        [ 1.5285546 ,  1.5705444 ,  1.6131843 , ...,  2.0331178 ,
          2.056102  ,  2.0738413 ],
...
        [-0.24281344, -0.2311048 , -0.21245493, ...,  2.0393054 ,
          1.952157  ,  1.7797613 ],
        [-0.30337298, -0.29068774, -0.27305645, ...,  1.8711834 ,
          1.8161476 ,  1.6167116 ],
        [-0.3554582 , -0.34528267, -0.3267063 , ...,  1.503752  ,
          1.5538417 ,  1.5262661 ]],

       [[-0.88259035, -0.9220995 , -0.9566686 , ...,  1.8813791 ,
          1.9043632 ,  1.9191835 ],
        [-1.0911965 , -1.1048253 , -1.1266619 , ...,  1.9713376 ,
          1.9946496 ,  2.0095243 ],
        [-1.3249073 , -1.3380989 , -1.350875  , ...,  1.9883761 ,
          2.018781  ,  2.0378637 ],
        ...,
        [ 1.1508583 ,  1.1197207 ,  1.0529324 , ...,  2.0892966 ,
          2.0107918 ,  1.8264158 ],
        [ 1.074452  ,  1.0030296 ,  0.92812055, ...,  1.8889747 ,
          1.855717  ,  1.6535263 ],
        [ 0.97419816,  0.8868299 ,  0.8100632 , ...,  1.524638  ,
          1.5723332 ,  1.5288672 ]]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>10m_v_component_of_wind</span></div><div class='xr-var-dims'>(time, x1, x2)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>1.054 1.018 0.983 ... -0.778 -0.724</div><input id='attrs-f7e31da4-e132-4fc5-a001-add3a88bc4b6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f7e31da4-e132-4fc5-a001-add3a88bc4b6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f84cc970-2fd9-4a51-ac4b-bbd749bdcd7d' class='xr-var-data-in' type='checkbox'><label for='data-f84cc970-2fd9-4a51-ac4b-bbd749bdcd7d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[ 1.0540881e+00,  1.0182923e+00,  9.8300970e-01, ...,
          1.4420865e+00,  1.4325457e+00,  1.4366663e+00],
        [ 1.0086231e+00,  9.7437513e-01,  9.3983626e-01, ...,
          1.5612113e+00,  1.5515506e+00,  1.5557227e+00],
        [ 9.7015196e-01,  9.3555319e-01,  9.0095431e-01, ...,
          1.6508585e+00,  1.6414031e+00,  1.6372997e+00],
        ...,
        [-7.2610891e-01, -7.6200718e-01, -7.6854742e-01, ...,
         -7.1113938e-01, -8.8267940e-01, -8.7818265e-01],
        [-8.4160048e-01, -8.6288816e-01, -8.5716861e-01, ...,
         -1.2555542e+00, -1.1878699e+00, -1.0134059e+00],
        [-9.1483313e-01, -9.2714417e-01, -9.1954392e-01, ...,
         -1.1848691e+00, -9.7225833e-01, -8.0542868e-01]],

       [[ 7.6629186e-01,  7.3474604e-01,  7.0416361e-01, ...,
         -7.0524555e-01, -6.3118845e-01, -5.4704404e-01],
        [ 8.4295106e-01,  8.2335114e-01,  7.9528624e-01, ...,
         -5.4133314e-01, -4.6632135e-01, -3.8118848e-01],
        [ 9.2358929e-01,  9.0448791e-01,  8.8523436e-01, ...,
         -3.9005920e-01, -3.1745508e-01, -2.4389644e-01],
...
        [-1.1776097e+00, -1.2850400e+00, -1.4078401e+00, ...,
         -5.3842860e-01, -6.8481743e-01, -6.9051790e-01],
        [-1.2283620e+00, -1.3342761e+00, -1.4526581e+00, ...,
         -8.7780237e-01, -8.4295344e-01, -7.6150787e-01],
        [-1.2609743e+00, -1.3704449e+00, -1.4837912e+00, ...,
         -7.6381052e-01, -6.4306021e-01, -5.7118100e-01]],

       [[ 1.6113994e-01,  1.6557619e-01,  1.6842957e-01, ...,
         -1.3953098e+00, -1.3844689e+00, -1.3523219e+00],
        [ 3.0843057e-02,  1.6971957e-02,  1.4732994e-02, ...,
         -1.3481355e+00, -1.3371387e+00, -1.3046267e+00],
        [-7.2961196e-02, -8.7894514e-02, -1.0261957e-01, ...,
         -1.2933800e+00, -1.2916409e+00, -1.2693762e+00],
        ...,
        [ 3.5955313e-01,  3.4301606e-01,  2.8095013e-01, ...,
         -5.0673562e-01, -6.5742260e-01, -6.8586248e-01],
        [ 3.1950191e-01,  2.9112437e-01,  2.1389596e-01, ...,
         -8.8749373e-01, -8.6598921e-01, -8.0972373e-01],
        [ 2.2508034e-01,  1.8238398e-01,  9.3731761e-02, ...,
         -8.9222151e-01, -7.7802432e-01, -7.2397697e-01]]], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-fa15a184-0afb-48bf-b2fd-5714002cdd8c' class='xr-section-summary-in' type='checkbox'  ><label for='section-fa15a184-0afb-48bf-b2fd-5714002cdd8c' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-28375499-a233-487e-817b-67d6f5dd34dd' class='xr-index-data-in' type='checkbox'/><label for='index-28375499-a233-487e-817b-67d6f5dd34dd' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2015-06-25&#x27;, &#x27;2015-06-26&#x27;, &#x27;2015-06-27&#x27;, &#x27;2015-06-28&#x27;,
               &#x27;2015-06-29&#x27;, &#x27;2015-06-30&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=&#x27;D&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x1</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-52c1c86f-aa93-4e72-9768-e2971f21dcce' class='xr-index-data-in' type='checkbox'/><label for='index-52c1c86f-aa93-4e72-9768-e2971f21dcce' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  0.6363636255264282,   0.6318181753158569,   0.6272727251052856,
         0.6227272748947144,   0.6181818246841431,   0.6136363744735718,
         0.6090909242630005,   0.6045454740524292,   0.6000000238418579,
         0.5954545736312866,
       ...
       0.040909089148044586,    0.036363635212183,  0.03181818127632141,
       0.027272727340459824, 0.022727273404598236,   0.0181818176060915,
       0.013636363670229912,  0.00909090880304575, 0.004545454401522875,
                        0.0],
      dtype=&#x27;float32&#x27;, name=&#x27;x1&#x27;, length=141))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x2</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-877be95a-f9c0-4795-861d-c30ee212e97b' class='xr-index-data-in' type='checkbox'/><label for='index-877be95a-f9c0-4795-861d-c30ee212e97b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                 0.0, 0.004545454401522875,  0.00909090880304575,
       0.013636363670229912,   0.0181818176060915, 0.022727273404598236,
       0.027272727340459824,  0.03181818127632141,    0.036363635212183,
       0.040909089148044586,
       ...
         0.9590908885002136,   0.9636363387107849,   0.9681817889213562,
         0.9727272987365723,   0.9772727489471436,   0.9818181991577148,
         0.9863636493682861,   0.9909090995788574,   0.9954545497894287,
                        1.0],
      dtype=&#x27;float32&#x27;, name=&#x27;x2&#x27;, length=221))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-355b1155-0e56-4d23-8196-bc325af82472' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-355b1155-0e56-4d23-8196-bc325af82472' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">station_df</span> <span class="o">=</span> <span class="n">data_processor</span><span class="p">(</span><span class="n">station_raw_df</span><span class="p">)</span>
<span class="n">station_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>PRCP</th>
      <th>TAVG</th>
    </tr>
    <tr>
      <th>time</th>
      <th>x1</th>
      <th>x2</th>
      <th>station</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">2015-06-25</th>
      <th>0.000309</th>
      <th>0.246364</th>
      <th>AGM00060531</th>
      <td>-0.278121</td>
      <td>0.759107</td>
    </tr>
    <tr>
      <th>0.001818</th>
      <th>0.239091</th>
      <th>AGE00147716</th>
      <td>-0.278121</td>
      <td>0.836200</td>
    </tr>
    <tr>
      <th>0.002127</th>
      <th>0.940909</th>
      <th>SYM00040030</th>
      <td>NaN</td>
      <td>1.221668</td>
    </tr>
    <tr>
      <th>0.003036</th>
      <th>0.314855</th>
      <th>AGM00060514</th>
      <td>-0.278121</td>
      <td>1.318035</td>
    </tr>
    <tr>
      <th>0.003636</th>
      <th>0.261509</th>
      <th>AGM00060520</th>
      <td>-0.278121</td>
      <td>1.125301</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2015-06-30</th>
      <th>0.198782</th>
      <th>0.412727</th>
      <th>ITM00016052</th>
      <td>NaN</td>
      <td>-2.575188</td>
    </tr>
    <tr>
      <th>0.061218</th>
      <th>0.263636</th>
      <th>SPM00008359</th>
      <td>-0.278121</td>
      <td>1.645682</td>
    </tr>
    <tr>
      <th>0.370600</th>
      <th>0.940000</th>
      <th>RSM00027611</th>
      <td>-0.278121</td>
      <td>-0.358749</td>
    </tr>
    <tr>
      <th>0.437818</th>
      <th>0.597455</th>
      <th>SWE00138750</th>
      <td>-0.278121</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0.522909</th>
      <th>0.498727</th>
      <th>SWE00140158</th>
      <td>-0.134323</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>16922 rows × 2 columns</p>
</div></div></div>
</div>
<p>You can also process multiple variables in one <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> call, and choose to normalise the data with <code class="docutils literal notranslate"><span class="pre">&quot;min_max&quot;</span></code>, which will scale the data to the range [-1, 1]. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aux_ds</span><span class="p">,</span> <span class="n">land_mask_ds</span> <span class="o">=</span> <span class="n">data_processor</span><span class="p">([</span><span class="n">aux_raw_ds</span><span class="p">,</span> <span class="n">land_mask_raw_ds</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;min_max&quot;</span><span class="p">)</span>
<span class="n">aux_ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:    (x1: 4200, x2: 6600)
Coordinates:
  * x1         (x1) float64 0.6363 0.6361 0.636 ... 0.0002273 7.576e-05
  * x2         (x2) float64 7.576e-05 0.0002273 0.0003788 ... 0.9998 0.9999
Data variables:
    elevation  (x1, x2) float32 -0.921 -0.921 -0.921 ... -0.8095 -0.8095 -0.8099
    tpi        (x1, x2) float32 -0.09401 -0.09401 -0.09401 ... -0.09305 -0.09199</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-773ca7d5-bd1e-4156-a59d-03cdbbc90b79' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-773ca7d5-bd1e-4156-a59d-03cdbbc90b79' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x1</span>: 4200</li><li><span class='xr-has-index'>x2</span>: 6600</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-8e07b7ff-9e8b-4726-9db9-a633413758f4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-8e07b7ff-9e8b-4726-9db9-a633413758f4' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x1</span></div><div class='xr-var-dims'>(x1)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6363 0.6361 ... 7.576e-05</div><input id='attrs-cc128158-c1f6-43f0-8bcb-95a04b74286a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cc128158-c1f6-43f0-8bcb-95a04b74286a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef9d98b8-aac8-4926-a6bf-25f0698e35fb' class='xr-var-data-in' type='checkbox'><label for='data-ef9d98b8-aac8-4926-a6bf-25f0698e35fb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([6.362879e-01, 6.361364e-01, 6.359848e-01, ..., 3.787879e-04,
       2.272727e-04, 7.575758e-05])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x2</span></div><div class='xr-var-dims'>(x2)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>7.576e-05 0.0002273 ... 0.9999</div><input id='attrs-db51bc10-e59c-4427-af8e-2b229ad1598e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-db51bc10-e59c-4427-af8e-2b229ad1598e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a3c0dc28-1962-4c3a-9e69-5c377d9234fb' class='xr-var-data-in' type='checkbox'><label for='data-a3c0dc28-1962-4c3a-9e69-5c377d9234fb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([7.575758e-05, 2.272727e-04, 3.787879e-04, ..., 9.996212e-01,
       9.997727e-01, 9.999242e-01])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-513e136b-4226-4c43-9a00-1767a63c7372' class='xr-section-summary-in' type='checkbox'  checked><label for='section-513e136b-4226-4c43-9a00-1767a63c7372' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>elevation</span></div><div class='xr-var-dims'>(x1, x2)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.921 -0.921 ... -0.8095 -0.8099</div><input id='attrs-7d252fdf-8179-496b-ba74-d3fd87816fcf' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7d252fdf-8179-496b-ba74-d3fd87816fcf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-783b2798-a76b-4c6f-be71-94990a1a2d64' class='xr-var-data-in' type='checkbox'><label for='data-783b2798-a76b-4c6f-be71-94990a1a2d64' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[-0.92104805, -0.92104805, -0.92104805, ..., -0.92104805,
        -0.92104805, -0.92104805],
       [-0.92104805, -0.92104805, -0.92104805, ..., -0.92104805,
        -0.92104805, -0.92104805],
       [-0.92104805, -0.92104805, -0.92104805, ..., -0.92104805,
        -0.92104805, -0.92104805],
       ...,
       [-0.92104805, -0.92104805, -0.92104805, ..., -0.8093372 ,
        -0.80907065, -0.80955046],
       [-0.92104805, -0.92104805, -0.92104805, ..., -0.8094705 ,
        -0.8091773 , -0.8100036 ],
       [-0.92104805, -0.92104805, -0.92104805, ..., -0.8094971 ,
        -0.80952376, -0.8099236 ]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tpi</span></div><div class='xr-var-dims'>(x1, x2)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.09401 -0.09401 ... -0.09199</div><input id='attrs-520d0ff3-c698-4fef-abd5-32f4d073328d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-520d0ff3-c698-4fef-abd5-32f4d073328d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d85183bf-ed0b-4c86-a9f6-86cfd1563f23' class='xr-var-data-in' type='checkbox'><label for='data-d85183bf-ed0b-4c86-a9f6-86cfd1563f23' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[-0.0940097 , -0.0940097 , -0.0940097 , ..., -0.0940097 ,
        -0.0940097 , -0.0940097 ],
       [-0.0940097 , -0.0940097 , -0.0940097 , ..., -0.0940097 ,
        -0.0940097 , -0.0940097 ],
       [-0.0940097 , -0.0940097 , -0.0940097 , ..., -0.0940097 ,
        -0.0940097 , -0.0940097 ],
       ...,
       [-0.0940097 , -0.0940097 , -0.0940097 , ..., -0.08949416,
        -0.09103137, -0.09256858],
       [-0.0940097 , -0.0940097 , -0.0940097 , ..., -0.09199212,
        -0.09439401, -0.09804487],
       [-0.0940097 , -0.0940097 , -0.0940097 , ..., -0.09352933,
        -0.09304895, -0.09199212]], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-88a37b34-ff97-4488-8ca9-c9c5e3d1afc8' class='xr-section-summary-in' type='checkbox'  ><label for='section-88a37b34-ff97-4488-8ca9-c9c5e3d1afc8' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x1</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-9576d284-5c0b-45e3-bd2f-e291a1ffaaee' class='xr-index-data-in' type='checkbox'/><label for='index-9576d284-5c0b-45e3-bd2f-e291a1ffaaee' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([    0.6362878787878788,     0.6361363636363638,     0.6359848484848486,
           0.6358333333333333,     0.6356818181818182,      0.635530303030303,
            0.635378787878788,     0.6352272727272728,     0.6350757575757577,
           0.6349242424242424,
       ...
        0.0014393939393940514,  0.0012878787878789085,  0.0011363636363637655,
        0.0009848484848486226,  0.0008333333333333505,  0.0006818181818182077,
        0.0005303030303030647, 0.00037878787878792183, 0.00022727272727277896,
        7.575757575763605e-05],
      dtype=&#x27;float64&#x27;, name=&#x27;x1&#x27;, length=4200))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x2</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-52552516-beb5-4572-a57d-47f4c6ce7c90' class='xr-index-data-in' type='checkbox'/><label for='index-52552516-beb5-4572-a57d-47f4c6ce7c90' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 7.575757575750686e-05, 0.00022727272727252057,  0.0003787878787875343,
        0.0005303030303030647,  0.0006818181818180784,  0.0008333333333330922,
        0.0009848484848486226,  0.0011363636363636363,    0.00128787878787865,
        0.0014393939393936637,
       ...
           0.9985606060606058,     0.9987121212121208,     0.9988636363636364,
           0.9990151515151514,     0.9991666666666664,     0.9993181818181819,
           0.9994696969696969,     0.9996212121212119,     0.9997727272727269,
           0.9999242424242425],
      dtype=&#x27;float64&#x27;, name=&#x27;x2&#x27;, length=6600))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-4de37592-5b99-4999-a967-e8494f2dc378' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-4de37592-5b99-4999-a967-e8494f2dc378' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
</section>
<section id="dataprocessor-configuration">
<h2>DataProcessor configuration<a class="headerlink" href="#dataprocessor-configuration" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> keeps track of the normalisation parameters used to transform the data.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> is called on data with a variable ID that matches one in the <code class="docutils literal notranslate"><span class="pre">config</span></code> dictionary, those normalisation parameters are used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_processor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DataProcessor with normalisation params:
{&#39;10m_u_component_of_wind&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
                             &#39;params&#39;: {&#39;mean&#39;: 0.644899845123291,
                                        &#39;std&#39;: 2.8509252071380615}},
 &#39;10m_v_component_of_wind&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
                             &#39;params&#39;: {&#39;mean&#39;: -0.19969606399536133,
                                        &#39;std&#39;: 3.2448606491088867}},
 &#39;2m_temperature&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
                    &#39;params&#39;: {&#39;mean&#39;: 289.39849853515625,
                               &#39;std&#39;: 5.538551330566406}},
 &#39;GLDAS_mask&#39;: {&#39;method&#39;: &#39;min_max&#39;, &#39;params&#39;: {&#39;max&#39;: 1.0, &#39;min&#39;: 0.0}},
 &#39;PRCP&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
          &#39;params&#39;: {&#39;mean&#39;: 1.1604694953552597, &#39;std&#39;: 4.172541647864038}},
 &#39;TAVG&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
          &#39;params&#39;: {&#39;mean&#39;: 19.0613726868119, &#39;std&#39;: 5.188503809362459}},
 &#39;coords&#39;: {&#39;time&#39;: {&#39;name&#39;: &#39;time&#39;},
            &#39;x1&#39;: {&#39;map&#39;: (35.0, 90.0), &#39;name&#39;: &#39;lat&#39;},
            &#39;x2&#39;: {&#39;map&#39;: (-15.0, 40.0), &#39;name&#39;: &#39;lon&#39;}},
 &#39;elevation&#39;: {&#39;method&#39;: &#39;min_max&#39;,
               &#39;params&#39;: {&#39;max&#39;: 4504.4375, &#39;min&#39;: -185.125}},
 &#39;tpi&#39;: {&#39;method&#39;: &#39;min_max&#39;, &#39;params&#39;: {&#39;max&#39;: 88.9609375, &#39;min&#39;: -73.671875}}}
</pre></div>
</div>
</div>
</div>
</section>
<section id="unnormalising-data">
<h2>Unnormalising data<a class="headerlink" href="#unnormalising-data" title="Link to this heading">#</a></h2>
<p>Keeping track of the normalisation parameters allows us to easily unnormalise data back to the original coordinates and units:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">era5_raw_ds_unnormalised</span> <span class="o">=</span> <span class="n">data_processor</span><span class="o">.</span><span class="n">unnormalise</span><span class="p">(</span><span class="n">era5_ds</span><span class="p">)</span>
<span class="n">xr</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">era5_raw_ds</span><span class="p">,</span> <span class="n">era5_raw_ds_unnormalised</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>
<span class="n">era5_raw_ds_unnormalised</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                  (time: 6, lat: 141, lon: 221)
Coordinates:
  * time                     (time) datetime64[ns] 2015-06-25 ... 2015-06-30
  * lat                      (lat) float32 70.0 69.75 69.5 ... 35.5 35.25 35.0
  * lon                      (lon) float32 -15.0 -14.75 -14.5 ... 39.75 40.0
Data variables:
    2m_temperature           (time, lat, lon) float32 274.7 274.8 ... 302.3
    10m_u_component_of_wind  (time, lat, lon) float32 6.309 6.305 ... 5.004
    10m_v_component_of_wind  (time, lat, lon) float32 3.221 3.105 ... -2.549</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-180bccc5-2a7b-4e2f-a067-7a7abdd35268' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-180bccc5-2a7b-4e2f-a067-7a7abdd35268' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 6</li><li><span class='xr-has-index'>lat</span>: 141</li><li><span class='xr-has-index'>lon</span>: 221</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-922bc53b-1ea3-4317-b4cd-928f33bb1d50' class='xr-section-summary-in' type='checkbox'  checked><label for='section-922bc53b-1ea3-4317-b4cd-928f33bb1d50' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-06-25 ... 2015-06-30</div><input id='attrs-b87d6418-cd0e-4d04-a8e8-d76537201b58' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b87d6418-cd0e-4d04-a8e8-d76537201b58' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ab96ba89-0b9b-41dc-8101-622831aa13a8' class='xr-var-data-in' type='checkbox'><label for='data-ab96ba89-0b9b-41dc-8101-622831aa13a8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-06-25T00:00:00.000000000&#x27;, &#x27;2015-06-26T00:00:00.000000000&#x27;,
       &#x27;2015-06-27T00:00:00.000000000&#x27;, &#x27;2015-06-28T00:00:00.000000000&#x27;,
       &#x27;2015-06-29T00:00:00.000000000&#x27;, &#x27;2015-06-30T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>70.0 69.75 69.5 ... 35.5 35.25 35.0</div><input id='attrs-1451f598-a72b-4818-b343-1fed4556a098' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1451f598-a72b-4818-b343-1fed4556a098' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9d35ef9b-2ae5-426c-9f81-2d573f7e70a6' class='xr-var-data-in' type='checkbox'><label for='data-9d35ef9b-2ae5-426c-9f81-2d573f7e70a6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([70.  , 69.75, 69.5 , 69.25, 69.  , 68.75, 68.5 , 68.25, 68.  , 67.75,
       67.5 , 67.25, 67.  , 66.75, 66.5 , 66.25, 66.  , 65.75, 65.5 , 65.25,
       65.  , 64.75, 64.5 , 64.25, 64.  , 63.75, 63.5 , 63.25, 63.  , 62.75,
       62.5 , 62.25, 62.  , 61.75, 61.5 , 61.25, 61.  , 60.75, 60.5 , 60.25,
       60.  , 59.75, 59.5 , 59.25, 59.  , 58.75, 58.5 , 58.25, 58.  , 57.75,
       57.5 , 57.25, 57.  , 56.75, 56.5 , 56.25, 56.  , 55.75, 55.5 , 55.25,
       55.  , 54.75, 54.5 , 54.25, 54.  , 53.75, 53.5 , 53.25, 53.  , 52.75,
       52.5 , 52.25, 52.  , 51.75, 51.5 , 51.25, 51.  , 50.75, 50.5 , 50.25,
       50.  , 49.75, 49.5 , 49.25, 49.  , 48.75, 48.5 , 48.25, 48.  , 47.75,
       47.5 , 47.25, 47.  , 46.75, 46.5 , 46.25, 46.  , 45.75, 45.5 , 45.25,
       45.  , 44.75, 44.5 , 44.25, 44.  , 43.75, 43.5 , 43.25, 43.  , 42.75,
       42.5 , 42.25, 42.  , 41.75, 41.5 , 41.25, 41.  , 40.75, 40.5 , 40.25,
       40.  , 39.75, 39.5 , 39.25, 39.  , 38.75, 38.5 , 38.25, 38.  , 37.75,
       37.5 , 37.25, 37.  , 36.75, 36.5 , 36.25, 36.  , 35.75, 35.5 , 35.25,
       35.  ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-15.0 -14.75 -14.5 ... 39.75 40.0</div><input id='attrs-560d8aeb-0f02-4f32-b2d3-b3aedc8341e4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-560d8aeb-0f02-4f32-b2d3-b3aedc8341e4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-174cec0c-4c4c-4e79-9ecb-68cef8f5332c' class='xr-var-data-in' type='checkbox'><label for='data-174cec0c-4c4c-4e79-9ecb-68cef8f5332c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-15.  , -14.75, -14.5 , ...,  39.5 ,  39.75,  40.  ], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d7967dbe-e833-474a-8de6-cb2fefcf9f0c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-d7967dbe-e833-474a-8de6-cb2fefcf9f0c' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>2m_temperature</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>274.7 274.8 274.9 ... 301.8 302.3</div><input id='attrs-dce605d8-ccd1-4da6-87ff-5b2a5341437a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-dce605d8-ccd1-4da6-87ff-5b2a5341437a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4daea379-89f1-4000-908a-820442237fb1' class='xr-var-data-in' type='checkbox'><label for='data-4daea379-89f1-4000-908a-820442237fb1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[274.70828, 274.8052 , 274.89203, ..., 282.80472, 282.7596 ,
         282.68246],
        [274.91272, 274.9645 , 275.02475, ..., 283.0922 , 283.04663,
         282.96866],
        [275.19687, 275.249  , 275.30002, ..., 283.34262, 283.26163,
         283.18387],
        ...,
        [293.41415, 293.37463, 293.31992, ..., 300.30933, 301.13376,
         302.16898],
        [293.53964, 293.461  , 293.3984 , ..., 299.87234, 301.0718 ,
         302.49606],
        [293.56833, 293.52408, 293.46017, ..., 301.63647, 302.208  ,
         302.6838 ]],

       [[275.2742 , 275.3317 , 275.3767 , ..., 281.3066 , 281.31528,
         281.3296 ],
        [275.79785, 275.80594, 275.81808, ..., 281.5466 , 281.55576,
         281.57   ],
        [276.35245, 276.35956, 276.36652, ..., 281.7767 , 281.77744,
         281.8018 ],
...
        [293.36816, 293.23074, 293.0853 , ..., 300.36563, 301.2991 ,
         302.37314],
        [293.40247, 293.225  , 293.07278, ..., 300.0508 , 301.3251 ,
         302.7498 ],
        [293.37302, 293.21848, 293.07587, ..., 301.59915, 302.27087,
         302.81064]],

       [[276.43915, 276.42694, 276.41342, ..., 279.2529 , 279.22427,
         279.21725],
        [276.48703, 276.46442, 276.4463 , ..., 279.43713, 279.4083 ,
         279.40152],
        [276.59802, 276.57477, 276.55164, ..., 279.62643, 279.59555,
         279.57266],
        ...,
        [294.0353 , 293.9642 , 293.91852, ..., 299.80585, 300.68835,
         301.71274],
        [294.10794, 294.00537, 293.94138, ..., 299.5942 , 300.85062,
         302.23325],
        [294.14474, 294.04956, 293.98392, ..., 301.15146, 301.77798,
         302.26114]]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>10m_u_component_of_wind</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>6.309 6.305 6.305 ... 5.128 5.004</div><input id='attrs-b6409514-b2ad-439e-a434-a947b15d98f2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b6409514-b2ad-439e-a434-a947b15d98f2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-50e0cf28-48e1-4bb9-bd8c-39717c395b7e' class='xr-var-data-in' type='checkbox'><label for='data-50e0cf28-48e1-4bb9-bd8c-39717c395b7e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[ 6.3088393 ,  6.304796  ,  6.3053493 , ...,  0.537299  ,
          0.6050296 ,  0.68551046],
        [ 6.375167  ,  6.391602  ,  6.4063096 , ...,  0.7180877 ,
          0.7869594 ,  0.86806005],
        [ 6.25262   ,  6.2690544 ,  6.2861094 , ...,  0.72731614,
          0.8336894 ,  0.93497527],
        ...,
        [ 0.9515083 ,  0.92421407,  0.7963836 , ..., 11.123737  ,
         10.960234  , 10.108662  ],
        [ 0.98633575,  0.88596296,  0.7174354 , ..., 10.802271  ,
         10.711876  ,  9.719692  ],
        [ 1.0333263 ,  0.8280804 ,  0.58898556, ...,  9.303526  ,
          9.348722  ,  9.081682  ]],

       [[ 6.168392  ,  6.295642  ,  6.421902  , ...,  5.9764457 ,
          6.0805016 ,  6.1554523 ],
        [ 5.9011774 ,  6.0204067 ,  6.1451344 , ...,  6.2327685 ,
          6.338357  ,  6.414042  ],
        [ 5.0026946 ,  5.1224046 ,  5.2439675 , ...,  6.4411664 ,
          6.506693  ,  6.557266  ],
...
        [-0.04734313, -0.01396269,  0.03920674, ...,  6.458807  ,
          6.2103534 ,  5.7188663 ],
        [-0.21999383, -0.18382919, -0.13356364, ...,  5.9795036 ,
          5.822601  ,  5.2540236 ],
        [-0.36848485, -0.3394752 , -0.28651536, ...,  4.9319844 ,
          5.074786  ,  4.9961705 ]],

       [[-1.8712993 , -1.9839368 , -2.082491  , ...,  6.008571  ,
          6.0740967 ,  6.1163483 ],
        [-2.4660199 , -2.5048742 , -2.567129  , ...,  6.2650356 ,
          6.3314967 ,  6.3739033 ],
        [-3.1323118 , -3.16992   , -3.206344  , ...,  6.3136115 ,
          6.4002934 ,  6.454697  ],
        ...,
        [ 3.9259107 ,  3.8371398 ,  3.6467314 , ...,  6.601328  ,
          6.3775167 ,  5.851875  ],
        [ 3.7080822 ,  3.5044622 ,  3.2909021 , ...,  6.0302253 ,
          5.93541   ,  5.3589797 ],
        [ 3.422266  ,  3.1731856 ,  2.9543295 , ...,  4.991529  ,
          5.1275043 ,  5.003586  ]]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>10m_v_component_of_wind</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>3.221 3.105 2.99 ... -2.724 -2.549</div><input id='attrs-5812dca6-c6bb-4f5c-b339-60281144fcdd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5812dca6-c6bb-4f5c-b339-60281144fcdd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-84748b37-20b8-44ca-b6dd-bdadabe862c6' class='xr-var-data-in' type='checkbox'><label for='data-84748b37-20b8-44ca-b6dd-bdadabe862c6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[ 3.220673  ,  3.1045206 ,  2.9900334 , ...,  4.4796734 ,
          4.448715  ,  4.4620857 ],
        [ 3.0731454 ,  2.9620154 ,  2.8499417 , ...,  4.866217  ,
          4.8348694 ,  4.8484073 ],
        [ 2.9483118 ,  2.8360436 ,  2.7237751 , ...,  5.1571097 ,
          5.126428  ,  5.113113  ],
        ...,
        [-2.5558183 , -2.6723032 , -2.6935253 , ..., -2.5072443 ,
         -3.0638678 , -3.0492764 ],
        [-2.9305723 , -2.9996479 , -2.9810889 , ..., -4.2737947 ,
         -4.0541687 , -3.4880571 ],
        [-3.1682022 , -3.2081497 , -3.183488  , ..., -4.0444307 ,
         -3.354539  , -2.8132    ]],

       [[ 2.2868142 ,  2.1844525 ,  2.0852168 , ..., -2.4881196 ,
         -2.2478147 , -1.9747777 ],
        [ 2.5355628 ,  2.4719636 ,  2.380897  , ..., -1.9562466 ,
         -1.7128439 , -1.4365996 ],
        [ 2.7972224 ,  2.7352412 ,  2.672766  , ..., -1.4653838 ,
         -1.2297935 , -0.99110603],
...
        [-4.0208755 , -4.369472  , -4.767941  , ..., -1.9468218 ,
         -2.4218333 , -2.4403305 ],
        [-4.1855593 , -4.529236  , -4.913369  , ..., -3.0480425 ,
         -2.9349625 , -2.670683  ],
        [-4.291382  , -4.646599  , -5.014392  , ..., -2.6781547 ,
         -2.286337  , -2.0530987 ]],

       [[ 0.32318056,  0.3375756 ,  0.34683442, ..., -4.727282  ,
         -4.692105  , -4.587792  ],
        [-0.09961464, -0.14462443, -0.15188955, ..., -4.574208  ,
         -4.5385246 , -4.4330277 ],
        [-0.436445  , -0.48490152, -0.5326823 , ..., -4.396534  ,
         -4.3908906 , -4.318645  ],
        ...,
        [ 0.9670037 ,  0.9133432 ,  0.711948  , ..., -1.8439826 ,
         -2.3329408 , -2.4252243 ],
        [ 0.83704305,  0.744962  ,  0.49436653, ..., -3.0794895 ,
         -3.0097103 , -2.8271368 ],
        [ 0.5306583 ,  0.39211452,  0.10445043, ..., -3.0948305 ,
         -2.7242765 , -2.5489004 ]]], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d0543a9c-2d61-4d8b-81ee-fbe4e7de917e' class='xr-section-summary-in' type='checkbox'  ><label for='section-d0543a9c-2d61-4d8b-81ee-fbe4e7de917e' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-900d053b-e2fb-403e-8604-c04f9950e16d' class='xr-index-data-in' type='checkbox'/><label for='index-900d053b-e2fb-403e-8604-c04f9950e16d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2015-06-25&#x27;, &#x27;2015-06-26&#x27;, &#x27;2015-06-27&#x27;, &#x27;2015-06-28&#x27;,
               &#x27;2015-06-29&#x27;, &#x27;2015-06-30&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=&#x27;D&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3f3b5c1c-17ae-4780-9ecc-61aea3f4e95b' class='xr-index-data-in' type='checkbox'/><label for='index-3f3b5c1c-17ae-4780-9ecc-61aea3f4e95b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 70.0, 69.75,  69.5, 69.25,  69.0, 68.75,  68.5, 68.25,  68.0, 67.75,
       ...
       37.25,  37.0, 36.75,  36.5, 36.25,  36.0, 35.75,  35.5, 35.25,  35.0],
      dtype=&#x27;float32&#x27;, name=&#x27;lat&#x27;, length=141))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-944fdf72-c2a3-484a-8553-825b6ab09389' class='xr-index-data-in' type='checkbox'/><label for='index-944fdf72-c2a3-484a-8553-825b6ab09389' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ -15.0, -14.75,  -14.5, -14.25,  -14.0, -13.75,  -13.5, -13.25,  -13.0,
       -12.75,
       ...
        37.75,   38.0,  38.25,   38.5,  38.75,   39.0,  39.25,   39.5,  39.75,
         40.0],
      dtype=&#x27;float32&#x27;, name=&#x27;lon&#x27;, length=221))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-df0a2e3e-c944-4b38-933b-b355e6517fc2' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-df0a2e3e-c944-4b38-933b-b355e6517fc2' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">station_df_unnormalised</span> <span class="o">=</span> <span class="n">data_processor</span><span class="o">.</span><span class="n">unnormalise</span><span class="p">(</span><span class="n">station_df</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_frame_equal</span><span class="p">(</span><span class="n">station_raw_df</span><span class="p">,</span> <span class="n">station_df_unnormalised</span><span class="p">)</span>
<span class="n">station_df_unnormalised</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>PRCP</th>
      <th>TAVG</th>
    </tr>
    <tr>
      <th>time</th>
      <th>lat</th>
      <th>lon</th>
      <th>station</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">2015-06-25</th>
      <th>35.017</th>
      <th>-1.450</th>
      <th>AGM00060531</th>
      <td>0.0</td>
      <td>23.0</td>
    </tr>
    <tr>
      <th>35.100</th>
      <th>-1.850</th>
      <th>AGE00147716</th>
      <td>0.0</td>
      <td>23.4</td>
    </tr>
    <tr>
      <th>35.117</th>
      <th>36.750</th>
      <th>SYM00040030</th>
      <td>NaN</td>
      <td>25.4</td>
    </tr>
    <tr>
      <th>35.167</th>
      <th>2.317</th>
      <th>AGM00060514</th>
      <td>0.0</td>
      <td>25.9</td>
    </tr>
    <tr>
      <th>35.200</th>
      <th>-0.617</th>
      <th>AGM00060520</th>
      <td>0.0</td>
      <td>24.9</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2015-06-30</th>
      <th>45.933</th>
      <th>7.700</th>
      <th>ITM00016052</th>
      <td>NaN</td>
      <td>5.7</td>
    </tr>
    <tr>
      <th>38.367</th>
      <th>-0.500</th>
      <th>SPM00008359</th>
      <td>0.0</td>
      <td>27.6</td>
    </tr>
    <tr>
      <th>55.383</th>
      <th>36.700</th>
      <th>RSM00027611</th>
      <td>0.0</td>
      <td>17.2</td>
    </tr>
    <tr>
      <th>59.080</th>
      <th>17.860</th>
      <th>SWE00138750</th>
      <td>0.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>63.760</th>
      <th>12.430</th>
      <th>SWE00140158</th>
      <td>0.6</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>16922 rows × 2 columns</p>
</div></div></div>
</div>
<p>Notice how the units of the unnormalised data are the same as the original data.</p>
<p>This functionality will be used under the hood
later to map model predictions back to the original units!</p>
</section>
<section id="saving-and-loading-a-dataprocessor">
<h2>Saving and loading a DataProcessor<a class="headerlink" href="#saving-and-loading-a-dataprocessor" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> configuration can be saved and loaded to avoid re-computing the normalisation parameters in new sessions.</p>
<p>This is done using the <code class="docutils literal notranslate"><span class="pre">save</span></code> method to save the <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> configuration to a folder, and then instantiating a new <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> with the same folder will recover the same <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_processor</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;../deepsensor_config/&quot;</span><span class="p">)</span>
<span class="n">data_processor2</span> <span class="o">=</span> <span class="n">DataProcessor</span><span class="p">(</span><span class="s2">&quot;../deepsensor_config/&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_processor2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DataProcessor with normalisation params:
{&#39;10m_u_component_of_wind&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
                             &#39;params&#39;: {&#39;mean&#39;: 0.644899845123291,
                                        &#39;std&#39;: 2.8509252071380615}},
 &#39;10m_v_component_of_wind&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
                             &#39;params&#39;: {&#39;mean&#39;: -0.19969606399536133,
                                        &#39;std&#39;: 3.2448606491088867}},
 &#39;2m_temperature&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
                    &#39;params&#39;: {&#39;mean&#39;: 289.39849853515625,
                               &#39;std&#39;: 5.538551330566406}},
 &#39;GLDAS_mask&#39;: {&#39;method&#39;: &#39;min_max&#39;, &#39;params&#39;: {&#39;max&#39;: 1.0, &#39;min&#39;: 0.0}},
 &#39;PRCP&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
          &#39;params&#39;: {&#39;mean&#39;: 1.1604694953552597, &#39;std&#39;: 4.172541647864038}},
 &#39;TAVG&#39;: {&#39;method&#39;: &#39;mean_std&#39;,
          &#39;params&#39;: {&#39;mean&#39;: 19.0613726868119, &#39;std&#39;: 5.188503809362459}},
 &#39;coords&#39;: {&#39;time&#39;: {&#39;name&#39;: &#39;time&#39;},
            &#39;x1&#39;: {&#39;map&#39;: (35.0, 90.0), &#39;name&#39;: &#39;lat&#39;},
            &#39;x2&#39;: {&#39;map&#39;: (-15.0, 40.0), &#39;name&#39;: &#39;lon&#39;}},
 &#39;elevation&#39;: {&#39;method&#39;: &#39;min_max&#39;,
               &#39;params&#39;: {&#39;max&#39;: 4504.4375, &#39;min&#39;: -185.125}},
 &#39;tpi&#39;: {&#39;method&#39;: &#39;min_max&#39;, &#39;params&#39;: {&#39;max&#39;: 88.9609375, &#39;min&#39;: -73.671875}}}
</pre></div>
</div>
</div>
</div>
<section id="computing-normalisation-parameters-over-a-subset-of-the-data">
<h3>Computing normalisation parameters over a subset of the data<a class="headerlink" href="#computing-normalisation-parameters-over-a-subset-of-the-data" title="Link to this heading">#</a></h3>
<p>Want to compute normalisation parameters only over a training period?
No problem: just slice the data before passing it to the <code class="docutils literal notranslate"><span class="pre">DataProcessor</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">data_processor</span><span class="p">(</span><span class="n">era5_raw_ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2015-06-25&quot;</span><span class="p">,</span> <span class="s2">&quot;2015-06-27&quot;</span><span class="p">)))</span>
<span class="n">era5_ds</span> <span class="o">=</span> <span class="n">data_processor</span><span class="p">(</span><span class="n">era5_raw_ds</span><span class="p">)</span>  <span class="c1"># Will use the normalisation parameters computed above when called on the full dataset</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./user-guide"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="deepsensor_design.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DeepSensor design</p>
      </div>
    </a>
    <a class="right-next"
       href="task.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tasks</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initialising-a-dataprocessor">Initialising a DataProcessor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normalising-data-with-a-dataprocessor">Normalising data with a DataProcessor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataprocessor-configuration">DataProcessor configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unnormalising-data">Unnormalising data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-and-loading-a-dataprocessor">Saving and loading a DataProcessor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-normalisation-parameters-over-a-subset-of-the-data">Computing normalisation parameters over a subset of the data</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Tom Andersson
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>